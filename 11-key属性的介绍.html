<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>

<body>

<div id="app">
  <!-- vue 中有个就地复用策略 -->
  <!-- key 的特殊属性主要用在 Vue 的虚拟 DOM 算法，在新旧 nodes 对比时辨识 VNodes。
        如果不使用 key，Vue 会使用一种最大限度减少动态元素, 并且尽可能的尝试修复/再利用相同类型元素的算法。
        使用 key，它会基于 key 的变化重新排列元素顺序，并且会移除 key 不存在的元素。 
  -->

  <!-- 这里加 :key 和 不加 :key 是截然不同的 -->
  <div v-for="item in personsArr" :key="item.id">
    <input type="checkbox"> 
    id: {{ item.id }}
    姓名: {{ item.name }}
    年龄: {{ item.age }}
  </div>

  <button @click="addFunc">添加元素</button>
</div>

<script src="./node_modules/vue/dist/vue.js"></script>

<script>

  var app = new Vue({
    el: "#app",
    data: {
      personsArr: [
        {
          id: 1,
          name: "张三",
          age: "24"
        }, 
        {
          id: 2,
          name: "李四",
          age: "24"
        },
        {
          id: 3,
          name: "王五",
          age: "18"
        },
        {
          id: 4,
          name: "赵六",
          age: "30"
        }
      ]
    },
    methods: {
      addFunc() {
        let lastId = Math.max(...this.personsArr.map(v=>v.id)) + 1
        this.personsArr.unshift({ id: lastId, name: "鹏鹏" + Math.random(), age: "16" })
      }
    }
  })
</script>
</body>

</html>